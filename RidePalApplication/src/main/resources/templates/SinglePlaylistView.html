    <!DOCTYPE html>
    <html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:id="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="../static/css/styles.css" th:href="@{/css/styles.css}" rel="stylesheet"/>
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"/>
        <script src="/js/scripts.js"></script>
        <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <title>Playlist</title>
    </head>

    <body id="main-body">

    <!--NAVIGATION BAR-->
    <section class="header">
        <nav>
            <a th:href="@{/playlists}">
                <div id="logo">
                    <!--            <img src="../images/logo-alt.gif" th:src="@{/images/logo-alt.gif}" alt="logo">-->
                    <h1 style="font-family: Forte, sans-serif;">RidePal</h1>
                </div>
            </a>
            <ul>
                <!--            <li><a href="PlaylistsView.html" th:href="@{/playlists}" th:text="#{navigation.playlists}">Explore</a>-->
                <!--            </li>-->
                <li th:unless="${isAuthenticated}"><a href="/login" th:href="@{/login}"
                                                      th:text="#{navigation.login}">Login</a></li>
                <!--            <li><a href="GenerateView.html" th:href="@{/playlists/generate}"-->
                <!--                   th:text="#{navigation.generate}">Generate</a></li>-->
                <li th:unless="${isAuthenticated}"><a href="RegisterView.html" th:href="@{/users/register}"
                                                      th:text="#{navigation.register}">SignUp</a>
                </li>
                <li th:if="${isAuthenticated}" class="nav-item"><a href="#" class="nav-link"
                                                                   th:href="@{/logout}">Logout</a></li>
            </ul>
        </nav>

        <div id="search-line">
            <form class="search" action="#" id="search-form" th:action="@{/playlists}" method="get">
                <input type="text" name="name" placeholder="Search..." class="search-input" th:object="${name}">
                <a class="search-btn" type="submit"> </a>
            </form>
            <a class="utility-btn" id="generate-playlist" th:href="${isAuthenticated ? '/playlists/generate' : '/login'}"
               th:text="#{navigation.generate}">Generate Playlist</a>
        </div>
    </section>
    <!--ENDS NAVIGATION BAR-->


    <section class="song-list">
        <div class="playlist-details">
            <img src="../images/logo.gif">
            <ul>
                <li><h2 th:text="${singlePlaylist.name}"></h2></li>
                <li>
                    <ul id="playlist-details-info">
                        <li><h4 th:text="'Creator: ' + ${singlePlaylist.creator.getUsername()}"></h4></li>
                        <li><h4 th:text="'Duration: ' + ${singlePlaylist.duration/60} + ' min'"></h4></li>
                        <li><h4 th:text="'Rank: ' + ${singlePlaylist.rank}"></h4>
                        <li><h4 th:text="'Number of songs: ' + ${singlePlaylist.getSongs().size()}"></h4>
                    </ul>
                </li>
            </ul>
        </div>
        <div th:each="song : ${singlePlaylist.songs}">
            <div class="song-item">
                <h3 th:text="${song.title}"></h3>
                <h4 th:text="'Artist: ' + ${song.artist.name}"></h4>
                <h4 th:text="'Duration: ' + ${song.duration/60} + ':'+ ${T(java.lang.String).format('%02d',song.duration%60)} + ' min'"></h4>
                <h4 th:text="'Rank: ' + ${song.rank}"></h4>
                <h4 th:text="'Album: ' + ${song.album.name}"></h4>
            </div>
        </div>
    </section>
    <a class="utility-btn" style="margin: 5vmin" href="GenerateView.html" th:href="@{/playlists/generate}">Load
        more...</a></li>


    <section>
        <div class="player">
            <div class="wrapper">
                <div class="details">
                    <div class="track-artist">Track Artist</div>
                    <div class="track-name">Track Name</div>
                </div>

                <div class="sliders">
                    <div class="slider-container" id="duration">
                        <div class="current-time">00:00</div>
                        <input type="range" min="1" max="100" value="0" class="seek-slider" onchange="seekTo()">
                        <div class="total-duration">00:00</div>
                    </div>

                    <div class="slider-container" id="volume">
                        <i class="fa fa-volume-down"></i>
                        <input type="range" min="1" max="100" value="99" class="volume-slider" onchange="setVolume()">
                        <i class="fa fa-volume-up"></i>
                    </div>
                </div>


                <div class="buttons">
                    <div class="prev-track" onclick="prevTrack()">
                        <i class="fa fa-step-backward fa" aria-hidden="true"></i>
                    </div>
                    <div class="playpause-track" onclick="playpauseTrack()">
                        <i class="fa fa-play-circle fa-2x" aria-hidden="true"></i>
                    </div>
                    <div class="next-track" onclick="nextTrack()">
                        <i class="fa fa-step-forward fa" aria-hidden="true"></i>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function playpauseTrack() {
                var button = document.querySelector('.playpause-track');
                button.classList.toggle("clicked");

                button.querySelector('i').classList.toggle("fa-play-circle");
                button.querySelector('i').classList.toggle("fa-pause-circle");

                setTimeout(function() {
                    button.classList.toggle("clicked");
                }, 500);
            }
            </script>
        <script>
            function fetchPlaylistById(playlistId) {
                fetch(`/api/playlists/${playlistId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {

                        console.log("Data received:", data);


                        if (data && data.songs) {
                            const songs = data.songs;
                            let songTitle
                            let songPreviewUrl
                            let songArtist
                            for (let i = 0; i < songs.length; i++) {
                               songTitle = songs.map(song => song.title)
                               songPreviewUrl = songs.map(song => song.previewUrl)
                                songArtist = songs.map(song =>song.artist.name)
                            }

                            console.log("Songs in the playlist:", songs);
                            console.log("Songs titles:",songTitle)
                            console.log("Songs mp3Urls:",songPreviewUrl)
                            console.log("Songs artists:",songArtist)
                        } else {
                            console.error("Unexpected JSON structure. Missing 'songs' property.");
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching playlist:', error);
                    });
            }




        </script>
        <script th:inline="javascript">
            var playlistId = /*[[${singlePlaylist.id}]]*/ 0;
            fetchPlaylistById(playlistId);
        </script>
    </section>


    <!-- FOOTER -->
    <section class="footer">
        <h5>About Us</h5>
        <h5>Copyright &copy 2023 WeWhoAreNotAsOthers</h5>
    </section>
    </body>
    </html>