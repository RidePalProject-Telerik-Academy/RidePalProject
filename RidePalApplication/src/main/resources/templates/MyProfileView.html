<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:id="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../static/css/styles.css" th:href="@{/css/styles.css}" rel="stylesheet"/>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"/>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ion-rangeslider@2.3.1/css/ion.rangeSlider.min.css"/>
    <script src="/js/scripts.js"></script>

    <title>Main</title>
</head>

<body id="main-body">

<!--NAVIGATION BAR-->
<section class="header">
    <nav>
        <a th:href="@{/playlists}">
            <div id="logo">
                <h1 style="font-family: Forte, sans-serif;">RidePal</h1>
            </div>
        </a>
        <ul>
            <li th:unless="${isAuthenticated}"><a href="/login" th:href="@{/login}"
                                                  th:text="#{navigation.login}">Login</a></li>

            <li th:unless="${isAuthenticated}"><a href="RegisterView.html" th:href="@{/users/register}"
                                                  th:text="#{navigation.register}">SignUp</a>
            </li>
            <li th:if="${isAuthenticated}" class="nav-item"><a href="#" class="nav-link"
                                                               th:href="@{/logout}">Logout</a></li>

            <li th:if="${isAdmin}" class="nav-item"><a href="#" class="nav-link"
                                                               th:href="@{/admins}">Admin Portal</a></li>
        </ul>
    </nav>

    <div id="search-line">
        <form class="search" action="#" id="search-form" th:action="@{/playlists}" method="get">
            <input type="text" name="name" placeholder="Search..." class="search-input" th:object="${name}">
            <a class="search-btn" type="submit"> </a>
        </form>
        <a class="utility-btn" id="generate-playlist" th:href="${isAuthenticated ? '/playlists/generate' : '/login'}"
           th:text="#{navigation.generate}">Generate Playlist</a>
    </div>
</section>
<!--ENDS NAVIGATION BAR-->


<!--USER CARD-->
<section class="main-content">
    <div class="playlist-item">
        <img class="playlist-item img profileImage" alt="Profile Image">
        <h2 th:text="${user.username}"></h2>
        <p th:text="${user.email}"></p>
        <p th:text="${user.firstName}"></p>
        <p th:text="${user.lastName}"></p>
        <!--ENDS USER CARD-->
    </div>
</section>

<!--UPDATE USER-->
<div class="update-profile">
    <div class="update-profile-container">
        <h3>Update Profile</h3>
        <form action="#" th:action="@{/users/update}" th:object="${userToUpdate}" method="post">
            <div class="user-details">
                <div class="input-box">
                    <input type="text" th:field="*{firstName}" placeholder="Enter your Fist Name" required>
                </div>
                <div class="input-box">
                    <input type="text" th:field="*{lastName}" placeholder="Enter your Last Name" required>
                </div>
                <div class="input-box">
                    <input type="text" th:field="*{email}" placeholder="Enter your Email" required>
                </div>
                <div class="input-box">
                    <input type="password" th:field="*{password}" placeholder="Enter your Password" required>
                </div>
                <div class="button">
                    <button type="submit">UPDATE</button>
                </div>
            </div>
            <!--END UPDATE USER-->

            <h3>Your Playlists</h3>
            <section class="main-content">
                <div th:each="playlist : ${userPlaylists}">
                    <div class="playlist-item">
                        <a th:href="@{/playlists/{id}(id=${playlist.id})}">
                            <img class="playlist-item img playlistImage" alt="Playlist Image">
                            <h3 th:text="${playlist.name}"></h3>
                            <h4 th:text="'Creator: ' + ${playlist.creator.getUsername()}"></h4>
                            <h4 th:text="'Duration: ' + ${playlist.duration/60} + ' min'"></h4>
                            <h4 th:text="'Rank: ' + ${playlist.rank}"></h4>
                        </a>
                    </div>
                </div>
            </section>


            <!-- FOOTER -->
            <section class="footer">
                <h5>About Us</h5>
                <h5>Copyright &copy 2023 WeWhoAreNotAsOthers</h5>
            </section>


</body>
</html>